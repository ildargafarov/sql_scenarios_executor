[
    {
        "id": 0,
        "query": "CREATE TABLE IF NOT EXISTS accounts(id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, client text, amount numeric);TRUNCATE accounts;INSERT INTO accounts VALUES (1, 'alice', 900.00), (2, 'bob', 202.00), (3, 'bob', 707.00);SELECT * FROM accounts;",
        "comment": "Инициализация таблиц и данных"
    },
    {
        "id": 0,
        "query": "BEGIN;SHOW transaction_isolation;"
    },
    {
        "id": 0,
        "query": "UPDATE accounts SET amount = 200.0 WHERE id = 2;UPDATE accounts SET amount = 800.0 WHERE id = 3;INSERT INTO accounts VALUES (4, 'charlie', 100.00);",
        "comment": "Первая транзакция изменяет строки и добавляет новую"
    },
    {
        "id": 1,
        "query": "BEGIN ISOLATION LEVEL REPEATABLE READ;SHOW transaction_isolation;"
    },
    {
        "id": 1,
        "query": "SELECT * FROM accounts ORDER BY id;"
    },
    {
        "id": 0,
        "query": "COMMIT;"
    },
    {
        "id": 1,
        "query": "SELECT * FROM accounts ORDER BY id;",
        "comment": "Вторая транзакция продолжает видеть ровно те же данные: нет изменений существующих строк, ни новых строк."
    },
    {
        "id": 1,
        "query": "COMMIT;"
    }
]